(function(e){var f,j,g,m=1,h,k=this,l,i=k.postMessage&&!e.browser.opera;i||(jqpmSendHashMessage=function(c){target.location=target_url.replace(/#.*$/,"")+"#"+ +new Date+m++ +"&"+c});e.postMessage=function(c,a,b){if(a)if(c="string"===typeof c?c:e.param(c),b=b||parent,i)b.postMessage(c,a.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(a)for(var a=0,c=c.match(/.{1,1000}/g),b=0,d="";d=c[b++];)setTimeout('jqpmSendHashMessage("'+d+"&;;pm_part="+b+","+c.length+'")',a),a+=500};e.receiveMessage=l=function(c,
a,b,d){d=a&&e.isWindow(a)?a:b&&e.isWindow(b)?b:d&&e.isWindow(d)?d:k;if(i)if(c&&(h&&l(),h=function(b){if("string"===typeof a&&b.origin!==a||e.isFunction(a)&&!1===a(b.origin))return!1;c(b)}),d.addEventListener)d[c?"addEventListener":"removeEventListener"]("message",h,!1);else d[c?"attachEvent":"detachEvent"]("onmessage",h);else f&&clearInterval(f),f=null,c&&(f=setInterval(function(){var a=d.document.location.hash,b=/^#?\d+&/;a!==j&&b.test(a)&&(j=a,a=a.match(/(.*)&;;pm_part=(\d+),(\d+)/),g+=a[1].replace(b,
""),a[2]===a[3]&&(c({data:g}),g=""))},"number"===typeof a?a:"number"===typeof b?b:100))}})(jQuery);
