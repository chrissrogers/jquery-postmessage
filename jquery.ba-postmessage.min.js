(function(f){var g,k,h,o=1,i,l=this,m,n=l.postMessage&&!f.browser.opera;f.postMessage=function(b,a,e){if(a)if(b="string"===typeof b?b:f.param(b),e=e||parent,n)e.postMessage(b,a.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(a)for(var d=0,b=b.match(/.{1,1000}/g),c=0,j;j=b[c++];){var g=setTimeout;j=j+"&;;pm_part="+c+","+b.length;e.location=a.replace(/#.*$/,"")+"#"+ +new Date+o++ +"&"+j;g(void 0,d);d+=200}};f.receiveMessage=m=function(b,a,e,d){d=a&&f.isWindow(a)?a:e&&f.isWindow(e)?e:d&&f.isWindow(d)?
d:l;if(n)if(b&&(i&&m(),i=function(c){if("string"===typeof a&&c.origin!==a||f.isFunction(a)&&!1===a(c.origin))return!1;b(c)}),d.addEventListener)d[b?"addEventListener":"removeEventListener"]("message",i,!1);else d[b?"attachEvent":"detachEvent"]("onmessage",i);else g&&clearInterval(g),g=null,b&&(g=setInterval(function(){var c=d.document.location.hash,a=/^#?\d+&/;c!==k&&a.test(c)&&(k=c,c=c.match(/(.*)&;;pm_part=(\d+),(\d+)/),h+=c[1].replace(a,""),c[2]===c[3]&&(b({data:h}),h=""))},"number"===typeof a?
a:"number"===typeof e?e:100))}})(jQuery);
