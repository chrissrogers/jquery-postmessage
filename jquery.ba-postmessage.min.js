(function(d){var f,h,l=1,g,i=this,j,k=i.postMessage&&!d.browser.opera;d.postMessage=function(c,a,b){if(a)if(c="string"===typeof c?c:d.param(c),b=b||parent,k)b.postMessage(c,a.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(a)b.location=a.replace(/#.*$/,"")+"#"+ +new Date+l++ +"&"+c};d.receiveMessage=j=function(c,a,b,e){e=a&&d.isWindow(a)?a:b&&d.isWindow(b)?b:e&&d.isWindow(e)?e:i;if(k)if(c&&(g&&j(),g=function(b){if("string"===typeof a&&b.origin!==a||d.isFunction(a)&&!1===a(b.origin))return!1;c(b)}),
e.addEventListener)e[c?"addEventListener":"removeEventListener"]("message",g,!1);else e[c?"attachEvent":"detachEvent"]("onmessage",g);else f&&clearInterval(f),f=null,c&&(f=setInterval(function(){var a=e.document.location.hash,b=/^#?\d+&/;a!==h&&b.test(a)&&(h=a,c({data:a.replace(b,"")}))},"number"===typeof a?a:"number"===typeof b?b:100))}})(jQuery);
